---
rawConfig: |
  @INCLUDE fluent-bit-service.conf
  @INCLUDE fluent-bit-input.conf
  @INCLUDE fluent-bit-filter.conf

  [OUTPUT]
      Name  gelf
      Match *
      Host  graylog-tcp
      Port  12201
      Mode tcp
      Gelf_Short_Message_Key short_message

  [FILTER]
      Name                kubernetes
      Match               kube.*
      Kube_URL            https://kubernetes.default.svc.cluster.local:443
      Merge_Log           On
      K8S-Logging.Parser  On
      K8S-Logging.Exclude On
      Labels              Off
      Annotations         Off

  [FILTER]
      Name modify
      Match *
      Rename log short_message
      Rename stream _stream
      Rename @timestamp timestamp
      Rename pod_name _k8s_pod_name
      Rename namespace_name _k8s_namespace_name
      Rename pod_id _k8s_pod_id
      Rename labels _k8s_labels
      Rename container_name _k8s_container_name
      Rename docker_id _docker_id
      Add version 1.1

  [FILTER]
      Name record_modifier
      Match *
      Remove_key annotations
      Remove_key _k8s_labels
      Remove_key kubrnetes
      Remove_key kubernetes

on_minikube: true
